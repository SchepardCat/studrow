name: Android-apk-build

on:
  workflow_dispatch:   # –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ GitHub ‚Üí Actions ‚Üí Run workflow

jobs:
  build-android:
    name: ü§ñ Android Build
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
      - uses: actions/checkout@v4

      # 2Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Flutter
      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'

      # 3Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
      - name: Get dependencies
        run: flutter pub get

      # 4Ô∏è‚É£ –ó–±—ñ—Ä–∫–∞ APK (debug –∞–±–æ release)
      - name: Build APK
        run: flutter build apk --release

      # üß© –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ .aab –¥–ª—è Play Store:
      # - name: Build App Bundle
      #   run: flutter build appbundle --release

      # 5Ô∏è‚É£ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è APK —É —Ä–µ–ª—ñ–∑–∏ GitHub
      - name: Upload APK to GitHub Releases
        uses: svenstaro/upload-release-action@v2
        with:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          file: build/app/outputs/flutter-apk/app-release.apk
          asset_name: app-release.apk
          tag: v1.0
          overwrite: true
          body: "Android release build"